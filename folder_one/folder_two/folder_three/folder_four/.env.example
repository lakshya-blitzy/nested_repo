# ==============================================================================
# ENVIRONMENT CONFIGURATION TEMPLATE
# ==============================================================================
# This file serves as a template for configuring the security-hardened Node.js
# HTTP server. Copy this file to .env and customize the values for your
# environment.
#
# Usage:
#   cp .env.example .env
#   # Edit .env with your environment-specific values
#
# IMPORTANT: Never commit your actual .env file to version control as it may
# contain sensitive information like SSL certificate paths and secrets.
# ==============================================================================

# ==============================================================================
# GENERAL CONFIGURATION
# ==============================================================================

# Application environment mode
# Valid values: development, staging, production
# - development: Enables verbose logging, relaxed security for local testing
# - staging: Pre-production environment with production-like security
# - production: Full security hardening, minimal logging, optimized performance
NODE_ENV=development

# HTTP server port
# The port on which the HTTP server will listen for incoming requests
# Default: 3000
# Note: Ports below 1024 require root/administrator privileges
PORT=3000

# HTTPS server port
# The port for encrypted HTTPS connections when ENABLE_HTTPS is true
# Default: 443 (standard HTTPS port)
# Note: Port 443 requires root/administrator privileges; use 8443 for unprivileged users
HTTPS_PORT=443

# ==============================================================================
# SSL/TLS CONFIGURATION
# ==============================================================================
# These settings configure HTTPS encryption for secure communication.
# For development, use self-signed certificates. For production, use
# certificates from a trusted Certificate Authority (CA).
#
# Generate self-signed certificates for development:
#   openssl req -x509 -nodes -days 365 -newkey rsa:2048 \
#     -keyout certs/server.key \
#     -out certs/server.cert \
#     -subj "/C=US/ST=State/L=City/O=Dev/CN=localhost"
# ==============================================================================

# Path to SSL private key file
# The private key used for TLS/SSL encryption
# SECURITY: Keep this file secure and never commit to version control
# Default: ./certs/server.key
SSL_KEY_PATH=./certs/server.key

# Path to SSL certificate file
# The public certificate for TLS/SSL encryption
# For production, obtain from a trusted CA (Let's Encrypt, DigiCert, etc.)
# Default: ./certs/server.cert
SSL_CERT_PATH=./certs/server.cert

# ==============================================================================
# CORS (Cross-Origin Resource Sharing) CONFIGURATION
# ==============================================================================
# CORS controls which external domains can access your API.
# This is a critical security feature to prevent unauthorized cross-origin
# requests and protect against CSRF attacks.
# ==============================================================================

# Allowed origins for CORS requests
# Comma-separated list of origins permitted to make cross-origin requests
# Format: protocol://hostname:port (port optional if standard 80/443)
# Examples:
#   - Single origin: http://localhost:3000
#   - Multiple origins: http://localhost:3000,https://myapp.com,https://api.myapp.com
#   - Production: https://yourdomain.com,https://app.yourdomain.com
#
# WARNING: Never use '*' (allow all) in production as it disables CORS protection
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080

# ==============================================================================
# RATE LIMITING CONFIGURATION
# ==============================================================================
# Rate limiting protects your server from abuse, brute force attacks, and
# DDoS attempts by limiting the number of requests from a single IP address
# within a specified time window.
# ==============================================================================

# Rate limit time window in milliseconds
# The duration of the time window for counting requests
# Default: 900000 (15 minutes = 15 * 60 * 1000 ms)
# Common values:
#   - 60000 (1 minute) - Strict limiting for sensitive endpoints
#   - 300000 (5 minutes) - Moderate limiting
#   - 900000 (15 minutes) - Standard limiting for general APIs
#   - 3600000 (1 hour) - Relaxed limiting for low-traffic APIs
RATE_LIMIT_WINDOW_MS=900000

# Maximum requests per window per IP address
# The maximum number of requests allowed from a single IP within the window
# Default: 100 requests per 15-minute window
# Guidelines:
#   - 10-50: Strict (authentication endpoints, sensitive operations)
#   - 100-200: Standard (general API usage)
#   - 500-1000: Relaxed (high-traffic public APIs)
#   - Adjust based on your expected legitimate traffic patterns
RATE_LIMIT_MAX=100

# ==============================================================================
# SECURITY OPTIONS
# ==============================================================================
# Additional security configuration options to control server behavior
# and security feature toggles.
# ==============================================================================

# Enable HTTPS server
# When true, starts an HTTPS server in addition to HTTP
# Requires valid SSL_KEY_PATH and SSL_CERT_PATH configuration
# Valid values: true, false
# Default: false (for development convenience)
# IMPORTANT: Set to true in production for encrypted communication
ENABLE_HTTPS=false

# Trust proxy headers
# Enable if running behind a reverse proxy (nginx, load balancer, etc.)
# When true, the server trusts X-Forwarded-* headers for:
#   - Client IP detection for rate limiting (X-Forwarded-For)
#   - Protocol detection for HTTPS redirects (X-Forwarded-Proto)
#   - Host detection (X-Forwarded-Host)
# Valid values: true, false
# Default: false
# WARNING: Only enable if you control the proxy and trust the headers
# Enabling without a trusted proxy can allow IP spoofing attacks
TRUST_PROXY=false

# ==============================================================================
# ENVIRONMENT-SPECIFIC CONFIGURATIONS
# ==============================================================================
# Below are suggested configuration presets for different environments.
# Uncomment and modify the appropriate section for your deployment.
# ==============================================================================

# --- DEVELOPMENT PRESET ---
# NODE_ENV=development
# PORT=3000
# HTTPS_PORT=8443
# ENABLE_HTTPS=false
# TRUST_PROXY=false
# ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080,http://127.0.0.1:3000
# RATE_LIMIT_WINDOW_MS=900000
# RATE_LIMIT_MAX=1000

# --- STAGING PRESET ---
# NODE_ENV=staging
# PORT=3000
# HTTPS_PORT=443
# ENABLE_HTTPS=true
# TRUST_PROXY=true
# ALLOWED_ORIGINS=https://staging.yourdomain.com
# RATE_LIMIT_WINDOW_MS=900000
# RATE_LIMIT_MAX=200

# --- PRODUCTION PRESET ---
# NODE_ENV=production
# PORT=3000
# HTTPS_PORT=443
# ENABLE_HTTPS=true
# TRUST_PROXY=true
# ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
# RATE_LIMIT_WINDOW_MS=900000
# RATE_LIMIT_MAX=100
# SSL_KEY_PATH=/etc/ssl/private/yourdomain.key
# SSL_CERT_PATH=/etc/ssl/certs/yourdomain.cert
